# step 1: base64 encoding of service account key 
# - cat key.json > key-base64.json

# step 2: docker login manually on machine
# - cat key-base64.json | docker login -u _json_key_base64 --password-stdin <docker registry url>

# step 3: paste the output of below command in ".dockerconfigjson" in gar-secrets.yml 
# - cat ~/.docker/config.json | base64 -w 0

# step 4: kubectl apply -f gar-secrets.yml -n kc-azure-prod 
# ref:
# - https://stackoverflow.com/questions/78000747/how-to-pull-docker-image-from-google-artifact-registry-in-k8s-deployment-yaml-vi
# - https://stackoverflow.com/questions/60807697/docker-login-error-storing-credentials-the-stub-received-bad-data

apiVersion: v1  
kind: Secret 
metadata:
  name: gar-secret
  namespace: kc-azure-prod
data:
  .dockerconfigjson: ewoJImF1dGhzIjogewoJCSJhc2lhLXNvdXRoMSamkl4ZUFscEdXbTVDTTFsdFpHRlRWWE55Q2sxdGREUlJha3EU5RVFUVUtWbFJKTTJOVlVrSlhWRkpPVlRCamVGUlZXVEphU0VKM1UybDBhbUZYZUhSVk1tdzFXbnBPYkU1dFNsbGxWVFZLWWtobk0xcHNlSFZqVms1U1dWWndUVk5yWTNwU1dHOHdVa2huTUFwalJFcFJaREpGZG1GRVRsVmxiR1JOVDBac1NXUlViRkJsYXpVellVWldNbEpXWkd4alIyZzFWREJ3VFdRelp6UlpNMWwzVVdwb2RGTXdTbTlqU0ZWNFYxWjRkV1ZHVmpKU2FtaDVDbUV3VG5sVlJsbHlaVmN4V0ZFd2JHMU9Na1o0WW5wS05XVnVTazloVkZKV1VsWlNiVTFGTVV0Vk1uQjBVVzFhVWxNd1NtNVZWVkp1VXpCek1FMHpTbmhWVms1R1YwaEtXVk5ZYkhFS1RXeDRkVmt6VGtOaGJFSkVZV3BLUTFwRWJHcFJNVnB4VkRJeFRtUkhNVFJVTWpWNVkwWktZVTR6VWxwVE1WSjZWR3BXYVZaVmRIUlVhekY1VFhwa2ExZEhTbmxqYlU1TFkwZG9iQXBSYmxKRlQxVkdiMWR1VWpST01YaDFWbTFhVkdKNlJrNWtWbFo2V1cxWk5XRkVRa3hUTVVaMVUxTnpNMkZVVm1sVlZ6bHdUVEExVW1ONlpFMVdNVXA0VDBWR1JsZFlhRlJPYkVad0NrNVdaR3RWYTFKVVV6Sm5lR1JJV20xTlYyd3pUbFYwVVZreGVIVk9SVXBYVkdwV2NsUnVaM3BTYkZrMFVqRk9hVmREZEhaVFJHaDJZbGRLTVdOSVpFeFJiV1JTVWtWTmRtVlRPVW9LVDFoTmNsa3haek5PYlZGNlRVUlNhV0l4UW05a2JIQklWRWh3UlU5WE1WZGhSM1IxVGtaNGRWUXphelZOU0c4elkxUmtjRlpGWkZaWmFrSlJVbGRTZEdRelVtdGthbFkwWW10U05ncFpXR3QyVFVWc01sWnViM1pXTVd4clRtdEdiMVJZY0ZOU1JGVjJVbXRXYTFkSGN6Rmhia0pxVkVka2RXRnVXa2xYYkhoMVZETktlV0ZIT1ZSWGJHdDVTek5hY0ZGcmRGaGlNV1F6Q21WcVVtbFVia28wWld0U2FFNUlaRlpqYlc4MVZGVndSR0ZHYkhwWGExSjBUbGhDVWxWcmVFMVZibWN4VWxWS1dVOVVhSFJaYTNBMldURkNVMXBXZUhWa01GSkVVMVJhV0ZreFZtMEtWVlYwUTFvd1pGZGlSbXhaVWxkMGRGWXljSFJPYkZacVYyNXJlbFY2VG1wWGJYUTBUbFZrUjJSR1NrdGxibVJVVjBWT2NHSXphR3RpTTBaWFpGVlNibFJYZEZSTlJUZzBWMFo0ZFFwbFZtTjRVM3BrZFZwRldtRlpiRTQxV1dzeGRHTjVPWHBOUm1ONFpGUmtiRm94Vm5aaldFWnhUMVV4U2xkRlRtOVdNVkp6VGtoS2RVNXJlRlJaVjNSb1RsUktObGRxYkhsVlZ6VlNDazVJUmtWTU0yUklWbFo0ZFdWSFZrUmtSM1J1VW01YWFGSXdhRkpTVjJ3MFlWWndNRmRITURGalJVcDFUakZrZEZSNmFEVlZhbXhoVTFaa2QxWkZSbWxaTUd4Ull6Rk9lbGRXU2pFS1QxUlJjbGt6VG5obGJscENZakJrUWxscmJGZFRNWGgxWWxkT1UxTXdVa3RWUkZKb1ZFVnNWVlJHVG5wamJsWkNZMWRTVkdSdVFuQlVhMlJaVFZWa2VWTlZOWFJoV0ZwWFlrUk9UZ3BpUkZaaFRucGFjV1F5U1RSUFJFWTFWRVZLVFUxV1ozcFVWMncyVERCM01HUldlSFZXTUdSMlVUQlNUVlZGVlROWmFsSjJWRWRSTkdGV1RsUmlhbHBvWXpKb05HTkZiSGRYVlhoSkNsZFdVVFZXTW1SVlVUQmFhVTFIVGpGYWFrWk5XVzAxZEZveFJtdFVSRTV5U3pOb2NsTXlTVEpWUkd0NFVURjRkV0Y2VGxWa2VrSnBWVlZvV1ZOWVFUTmpSVTV0WVd4Q05WZEVRa3dLWWxoSk0xUnRNVnBSYld4dVRURndNRlZYWnpCYVNFRjNVVEprV2xKVlJuTmFSbkJvVDBNNWMyVnRPVmhoYmxaS1VXdDBiMkpYYkU5WGJIaDFTekphY0V3d05IbFpWVVpEVFhwT2FBcE1NR2hYVmpJeFJsRXpiRzVOTVZFMFYwZFJNV0l6V2pGVE1YQlVWMFZXTkZwSVpESmxhbFpoVTFWT1NGbHNVVFZhZW1NelVrWk5OVlJ0TkRCYVJHUnRUVU4wWVZOV2VIVlVNRGw1Q21KR1dtOVdhMUZ5WTJsMFRtUnVXa3BpUmtwWlRtMU9WMXBzWkhKaVdFNVJWakIwV1ZORmNHbGlNazUyVjBSYWJHSXdOVVZoYkZKQ1UxVndhMUV4VGpWVFJsWnNaRmhGTTFWc1Rub0taVVZhVVZsc2VIVmxiRUpXVGtaR1ZGZFhOVXRSYkU1MVpHcEdWbUpGYUZoVU1tUjRaREpOT1ZoSE5IUk1VekIwVEZWV1QxSkRRbEZWYTJ4WFVWWlNSa2xGZEVaWFV6QjBURk13ZEFwWVJ6UnBURUZ2WjBsRFNtcGlSMnhzWW01U1pscFhNV2hoVjNkcFQybEJhVmt6Vm5wa1J6bDBURmRzZEZsWFpHeE1XRUl4WWtkNFFWbFhlREJpTTBwb1kwaEtka3hZUW5saU1sRjBDbU16VG5aTWJXeG9ZbE0xYm1NeVZubGtiV3hxV2xkR2Fsa3lPVEZpYmxGMVdUSTVkRWxwZDB0SlEwRnBXVEo0Y0ZwWE5UQllNbXhyU1dwdlowbHFSWGRQVkZWNFRYcG5NVTFxUlRNS1QxUkplazVFV1RWT1ZGRTFUME5KYzBOcFFXZEpiVVl4WkVkb1ptUllTbkJKYW05blNXMW9NR1JJUW5wUGFUaDJXVmRPYW1JelZuVmtTRTExV2pJNWRsb3llR3hNYlU1MllsTTVkZ3BNTWpsb1pGaFNiMDFwT1doa1dGSnZTV2wzUzBsRFFXbGtSemx5V2xjMVptUllTbkJKYW05blNXMW9NR1JJUW5wUGFUaDJZakpHTVdSSFozbE1iV1IyWWpKa2MxcFhSbmRoV0UxMUNsa3lPWFJNTTFKMllUSldkVWxwZDB0SlEwRnBXVmhXTUdGR09YZGpiVGt5WVZkU2JHTnNPVFJPVkVFMVdESk9iR051VW1aa1dFcHpTV3B2WjBsdGFEQmtTRUo2VDJrNGRtUXpaRE1LVEcxa2RtSXlaSE5hVjBaM1lWaE5kVmt5T1hSTU1qbG9aRmhTYjAxcE9USk5VemxxV2xoS01HTjVTWE5EYVVGblNXMU9jMkZYVm5Wa1JqazBUbFJCTlZneVRteGpibEptWkZoS2N3cEphbTluU1cxb01HUklRbnBQYVRoMlpETmtNMHh0WkhaaU1tUnpXbGRHZDJGWVRYVlpNamwwVEROS2RsbHRPVEJNTTFsNFRESXhiR1JIUm10WldGSm9URE5uTVUxRWEzWlpNMVo2Q21SSE9YUk1WMngwV1Zka2JFeFlRakZpUjNkc1RrUkNhR0pJVW5aamJVWjNZMjA0ZEdOSVNuWmFRekY2WXpJNGRXRlhSblJNYldSNldsaEtNbUZYVG14WlYwNXFZak5XZFdSRE5Xb0tZakl3YVV4QmIyZEpRMG94WW0xc01scFlTbnBhVmpscllqSXhhR0ZYTkdsUGFVRnBXakk1ZGxveWVHeFpXRUp3WTNrMWFtSXlNR2xEYmpCTCIKCQl9LAoJCSJhc2lhLXNvdXRoMTEtZG9ja2VyLnBrZy5kZXYiOiB7fSwKCQkidXMtd2VzdDEtZG9ja2VyLnBrZy5kZXYiOiB7fQoJfSwKCSJjcmVkSGVscGVycyI6IHsKCQkiYXNpYS1zb3V0aDEtZG9ja2VyLnBrZy5kZXYiOiAiZ2Nsb3VkIiwKCQkiYXNpYS5nY3IuaW8iOiAiZ2Nsb3VkIiwKCQkiZXUuZ2NyLmlvIjogImdjbG91ZCIsCgkJImdjci5pbyI6ICJnY2xvdWQiLAoJCSJtYXJrZXRwbGFjZS5nY3IuaW8iOiAiZ2Nsb3VkIiwKCQkic3RhZ2luZy1rOHMuZ2NyLmlvIjogImdjbG91ZCIsCgkJInVzLmdjci5pbyI6ICJnY2xvdWQiCgl9LAoJImN1cnJlbnRDb250ZXh0IjogImRlc2t0b3AtbGludXgiLAoJInBsdWdpbnMiOiB7CgkJIi14LWNsaS1oaW50cyI6IHsKCQkJImVuYWJsZWQiOiAidHJ1ZSIKCQl9LAoJCSJkZWJ1ZyI6IHsKCQkJImhvb2tzIjogImV4ZWMiCgkJfSwKCQkic2NvdXQiOiB7CgkJCSJob29rcyI6ICJwdWxsLGJ1aWxkeCBidWlsZCIKCQl9Cgl9LAoJImZlYXR1cmVzIjogewoJCSJob29rcyI6ICJ0cnVlIgoJfQp9
type: kubernetes.io/dockerconfigjson
